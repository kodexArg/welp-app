/* ==========================================================================
   Componente: Ticket
   ========================================================================== */

@layer components {
    /*
     * Contenedor principal del ticket. Define la "cáscara" o el layout base.
     */
    .ticket-container {
        @apply bg-white rounded-2xl border border-border shadow-sm mb-3 list-none;
    }

    /*
     * Cabecera visible del ticket, usada dentro de <summary>.
     */
    .ticket-header {
        @apply flex flex-wrap justify-between items-center p-3 cursor-pointer;
    }

    /*
     * Título principal del ticket.
     */
    .ticket-title {
        @apply flex items-center flex-grow font-bold text-text;
    }

    /*
     * Ícono de flecha para expandir/colapsar.
     */
    .ticket-caret {
        @apply mr-2 transition-transform duration-200;
    }
    details[open] > .ticket-header .ticket-caret {
        @apply rotate-90;
    }

    /*
     * Contenedor para toda la información de metadatos (tags, estado).
     */
    .ticket-info {
        @apply flex items-center gap-2 mt-2 sm:mt-0;
    }

    /* ==========================================
       TAGS - Sistema de etiquetas (migrado de components.css)
       ========================================== */
    
    /* Tag base genérico */
    .tag {
        @apply text-xs font-medium py-1 px-1 rounded-full leading-none whitespace-nowrap border-2;
        @apply font-[var(--font-ui)];
    }

    /* Tags individuales legacy (mantener para compatibilidad) */
    .tag-udn {
        @apply bg-yellow-100 text-accent border-accent;
    }

    .tag-sector {
        @apply text-xs font-medium py-1 px-1 rounded-full leading-none whitespace-nowrap border-2;
        @apply bg-surface text-text border-primary;
    }

    .tag-category {
        @apply bg-purple-100 text-purple-600 border-purple-300;
    }

    /* Estados de tags interactivos */
    .tag-unpressed {
        @apply bg-gray-100 text-gray-600 border-gray-300;
    }
    
    .tag-pressed {    
        @apply bg-surface text-text border-primary;
    }

    /* Tags UDN - Sector - Categoría */
    .tags-ticket-udn {
        @apply bg-gray-50 text-gray-600 border border-gray-200 rounded-s-full cursor-not-allowed select-none uppercase text-[10px] py-0.5 px-2 border-r-0 mr-0 pointer-events-none;
    }

    .tags-ticket-sector {
        @apply bg-gray-50 text-gray-600 border-y border-gray-200 rounded-none cursor-not-allowed select-none uppercase text-[10px] py-0.5 px-2 border-l-0 border-r-0 ml-0 mr-0 pointer-events-none;
    }

    .tags-ticket-category {
        @apply bg-gray-50 text-gray-600 border border-gray-200 rounded-e-full cursor-not-allowed select-none uppercase text-[10px] py-0.5 px-2 border-l-0 ml-0 pointer-events-none;
    }

    /*
     * Contenedor de detalles expandibles.
     */
    .ticket-details {
        @apply px-3 pb-3 border-t border-border pt-3;
    }

    /* ==========================================================================
       Componente: Ticket Status
       ========================================================================== */
    
    .ticket-status {
        @apply text-xs font-bold py-1 px-2 rounded-full uppercase flex items-center border;
    }
    
    .ticket-status--open { @apply bg-red-50 text-red-500 border-red-200; }
    .ticket-status--authorized { @apply bg-purple-100 text-purple-500 border-purple-200; }
    .ticket-status--budgeted { @apply bg-emerald-50 text-emerald-500 border-emerald-200; }
    .ticket-status--rejected { @apply bg-amber-100 text-amber-600 border-amber-200; }
    .ticket-status--payment_authorized { @apply bg-purple-100 text-purple-600 border-purple-200; }
    .ticket-status--processing_payment { @apply bg-cyan-100 text-cyan-600 border-cyan-200; }
    .ticket-status--shipping { @apply bg-fuchsia-100 text-fuchsia-500 border-fuchsia-200; }
    .ticket-status--closed { @apply bg-slate-100 text-slate-400 border-slate-200; }
    .ticket-status--unknown { @apply bg-gray-100 text-gray-400 border-gray-200; }

    /* Nuevos estilos de status (migrado de components.css) */
    .status {
        @apply text-[10px] font-semibold py-0.5 px-2 rounded-full uppercase tracking-wide;
        @apply ml-1;
        @apply flex items-center justify-center;
        @apply h-5 min-h-5;
        @apply cursor-not-allowed select-none pointer-events-none;
    }

    .status-open {
        @apply bg-red-50 text-red-400 border border-red-200;
    }

    .status-authorized {
        @apply bg-purple-100 text-purple-500 border border-purple-200;
    }

    .status-budgeted {
        @apply bg-emerald-50 text-emerald-500 border border-emerald-200;
    }

    .status-rejected {
            @apply bg-amber-100 text-amber-600 border border-amber-200;
    }

    .status-payment_authorized {
        @apply bg-purple-100 text-purple-600 border border-purple-200;
    }

    .status-processing_payment {
        @apply bg-cyan-100 text-cyan-600 border border-cyan-200;
    }

    .status-shipping {
        @apply bg-fuchsia-100 text-fuchsia-500 border border-fuchsia-200;
    }

    .status-closed {
        @apply bg-slate-100 text-slate-400 border border-slate-200;
    }

    .status-unknown {
        @apply bg-gray-100 text-gray-400 border border-gray-200;
    }

    .text-status-open { @apply text-red-400; }
    .text-status-feedback { @apply text-forest-600; }
    .text-status-solved { @apply text-green-700; }
    .text-status-authorized { @apply text-purple-600; }
    .text-status-budgeted { @apply text-forest-400; }
    .text-status-rejected { @apply text-yellow-600; }
    .text-status-payment_authorized { @apply text-purple-600; }
    .text-status-processing_payment { @apply text-cyan-600; }
    .text-status-shipping { @apply text-earth-400; }
    .text-status-closed { @apply text-forest-300; }
    .text-status-unknown { @apply text-gray-400; }

    .bg-status-open { @apply bg-red-50; }
    .bg-status-feedback { @apply bg-forest-200; }
    .bg-status-solved { @apply bg-green-100; }
    .bg-status-authorized { @apply bg-purple-100; }
    .bg-status-budgeted { @apply bg-forest-100; }
    .bg-status-rejected { @apply bg-yellow-100; }
    .bg-status-payment_authorized { @apply bg-purple-100; }
    .bg-status-processing_payment { @apply bg-cyan-100; }
    .bg-status-shipping { @apply bg-earth-50; }
    .bg-status-closed { @apply bg-forest-100; }
    .bg-status-unknown { @apply bg-gray-100; }

    /* ==========================================================================
       Componente: Ticket Message
       ========================================================================== */
    
    .ticket-message {
        @apply mb-3;
    }
    
    .ticket-message__author {
        @apply text-xs text-forest-600 ml-2 font-sans italic flex items-center;
    }
    
    .ticket-message__author-icon {
        @apply mr-1.5;
    }
    
    .ticket-message__body {
        @apply ml-8 bg-surface border border-border text-sm p-2 rounded-lg relative;
    }
    
    .ticket-message__date {
        @apply text-[10px] text-forest-400 absolute bottom-1.5 right-1.5;
    }

    /* ==========================================================================
       Componente: Ticket Actions
       ========================================================================== */

    .ticket-actions {
        @apply flex justify-end gap-2 mt-4;
    }
    
    .ticket-actions__button {
        @apply bg-surface border border-border text-text text-xs rounded-full py-1 px-3 inline-flex items-center font-medium no-underline transition-colors;
        @apply hover:bg-primary hover:text-white;
    }

    .ticket-actions__button i {
        @apply mr-2;
    }

    /* ==========================================================================
       Componente: Ticket Response Form
       ========================================================================== */

    .ticket-response-form {
        @apply bg-white border border-forest-200 rounded-2xl shadow-sm p-6 mb-3 space-y-4;
    }
    
    .ticket-response-form__group {
        @apply space-y-2;
    }
    
    .ticket-response-form__label {
        @apply block text-sm font-medium text-text font-ui;
    }
    
    .ticket-response-form__input,
    .ticket-response-form__textarea {
        @apply w-full px-3 py-2 border rounded-md bg-white text-text border-forest-300;
        @apply focus:outline-none focus:ring-2 focus:border-forest-400;
        --tw-ring-color: rgb(226 232 240);
    }
    
    .ticket-response-form__textarea {
        @apply min-h-[100px] resize-y;
    }
    
    .ticket-response-form__actions {
        @apply flex gap-3 pt-4;
    }
} 