document.addEventListener("DOMContentLoaded",()=>{const o=["udn-container","sector-container","accounting-category-container","fields-body-container"],c=document.getElementById("payflow-form"),d=document.getElementById("submit-btn"),f=document.getElementById("reset-form-btn"),r=document.getElementById("htmx-errors"),a=document.getElementById("form-validation-errors"),l=document.getElementById("validation-error-list");function h(t){const e=document.getElementById(o[t]);e&&(e.style.display="none")}function E(t){const e=document.getElementById(o[t]);e&&(e.style.display="block")}function g(t){const e=document.getElementById(o[t]);e&&(e.querySelectorAll('input[type="radio"]').forEach(n=>n.checked=!1),t===o.length-1&&e.querySelectorAll('input[type="text"], textarea').forEach(n=>n.value=""))}function u(t){for(let e=t;e<o.length;e++)h(e),g(e)}function p(t){l.innerHTML="",t.forEach(e=>{const n=document.createElement("li");n.textContent=e,l.appendChild(n)}),a.classList.remove("hidden"),a.scrollIntoView({behavior:"smooth",block:"start"})}function s(){a.classList.add("hidden")}function y(){u(1),r&&r.classList.add("hidden"),s(),htmx.ajax("GET","/payflow/htmx/udn/","#udn-container")}function L(){var i,m;const t=[],e=new FormData(c);e.get("udn")||t.push("La UDN es requerida."),e.get("sector")||t.push("El Sector es requerido."),e.get("accounting_category")||t.push("La Categoría Contable es requerida."),(i=e.get("title"))!=null&&i.trim()||t.push("El Título es requerido.");const n=(m=e.get("description"))==null?void 0:m.trim();return n?n.length<10&&t.push("La descripción debe tener al menos 10 caracteres."):t.push("La Descripción es requerida."),[...new Set(t)]}d.addEventListener("click",t=>{t.preventDefault();const e=L();if(e.length>0){p(e);return}s(),d.disabled=!0,d.innerHTML='<i class="fa fa-spinner fa-spin mr-2" aria-hidden="true"></i>Enviando...',c.submit()}),f.addEventListener("click",()=>{window.location.reload()}),document.addEventListener("change",t=>{var e;if(t.target.type==="radio"){t.target.name;const n=(e=t.target.closest('[id$="-container"]'))==null?void 0:e.id,i=o.indexOf(n);i!==-1&&u(i+1),s()}}),document.addEventListener("htmx:afterSwap",t=>{const e=t.detail.target,n=t.target;n.id!==e.id&&(n.id=e.id);const i=o.indexOf(e.id);i!==-1&&E(i)}),document.addEventListener("htmx:responseError",()=>{r&&r.classList.remove("hidden")}),document.addEventListener("htmx:sendError",()=>{r&&r.classList.remove("hidden")}),document.addEventListener("htmx:beforeRequest",()=>{r&&r.classList.add("hidden")}),y()});
