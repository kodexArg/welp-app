{% extends "core/base.html" %}
{% load payflow_tags %}
{% load django_vite %}

{% block title %}{{ ticket.title }} - Welp Payflow{% endblock %}

{% block content %}
<section class="max-w-3xl mx-auto">
    <h2 class="text-2xl font-bold">{{ response_info.action_label }}</h2>
    
    {% if response_type == 'close' %}
        <div class="{{ confirmation_info.style.bg }} border-l-4 {{ confirmation_info.style.border }} p-4 mb-6 rounded-r-lg">
            {% if is_owner %}
                <p class="{{ confirmation_info.style.text }}">{{ confirmation_info.owner_message }}</p>
            {% else %}
                <p class="{{ confirmation_info.style.text }}">{{ confirmation_info.non_owner_message }}</p>
            {% endif %}
        </div>
    {% endif %}

    <div class="ticket-detail-container">
        {% ticket_container ticket expanded=True %}
    </div>

    {% if show_comment_box %}
        {% payflow_response_form ticket=ticket response_type=response_type is_owner=is_owner cancel_url=cancel_url cancel_text="Cancelar" hidden_fields=hidden_fields %}
    {% endif %}
</section>

{% endblock %}

{% block scripts %}
    {% vite_asset 'frontend/js/welp_payflow/attachment_manager.js' %}
{% endblock %}