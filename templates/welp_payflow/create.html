{% extends "core/base.html" %}
{% load core_tags %}
{% load django_vite %}

{% block title %}Crear Solicitud - Welp Payflow{% endblock %}

{% block content %}
<section>
    <h2>Crear Nueva Solicitud</h2>

    <form method="post" enctype="multipart/form-data" hx-target="this" hx-swap="outerHTML" id="payflow-form">
        {% csrf_token %}

        <div id="udn-container"
             hx-get="{% url 'welp_payflow:htmx-udn' %}"
             hx-target="#udn-container"
             hx-swap="outerHTML"
             hx-trigger="load">
        </div>

        <div id="sector-container"></div>

        <div id="accounting-category-container"></div>

        <div id="fields-body-container">
            {% select_fields_body form %}
        </div>

        {% if form.non_field_errors %}
        <article>
            <div class="text-status-open">
                {{ form.non_field_errors }}
            </div>
        </article>
        {% endif %}

        <div class="component-buttons">
            <a href="{% url 'welp_payflow:index' %}" class="button-secondary">Volver</a>
            <button type="button" class="button-secondary" id="reset-form-btn">Limpiar</button>
            <button type="submit" form="payflow-form" class="button-primary">Crear Solicitud</button>
        </div>
    </form>
</section>
{% endblock %}

{% block scripts %}
    {% vite_asset 'frontend/js/welp_payflow/create.js' %}
{% endblock %} 