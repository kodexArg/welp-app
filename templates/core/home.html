{% extends "core/base.html" %}

{% block title %}{% if user.is_authenticated %}Dashboard{% else %}Bienvenido{% endif %} - Welp App{% endblock %}

{% block content %}
{% if user.is_authenticated %}
    <!-- Dashboard para usuarios logueados -->
    <section class="animate-fade-in">
        <h1>Dashboard</h1>
        <p>Bienvenido, {{ user.get_full_name|default:user.username }}</p>

        <!-- Navegación Principal -->
        <article class="animate-slide-in-bottom animate-delay-200">
            <h3>Aplicaciones</h3>
            
            {% if user.is_staff %}
            <div class="card">
                <div class="card-header">
                    <h4><i class="fa fa-code"></i> Desarrollo</h4>
                </div>
                <div class="card-body">
                    <p>Herramientas de desarrollo y testing</p>
                    <a href="{% url 'core:dev' %}" class="button-primary">Acceder</a>
                </div>
            </div>
            {% endif %}

            <div class="card">
                <div class="card-header">
                    <h4><i class="fa fa-headset"></i> WelpDesk</h4>
                </div>
                <div class="card-body">
                    <p>Sistema de soporte y tickets</p>
                    <a href="{% url 'welp_desk:index' %}" class="button-primary">Acceder</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h4><i class="fa fa-user-check"></i> WelpPay</h4>
                </div>
                <div class="card-body">
                    <p>Sistema de pagos y facturación</p>
                    <a href="{% url 'welp_pay:index' %}" class="button-primary">Acceder</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h4><i class="fa fa-user"></i> Mi Perfil</h4>
                </div>
                <div class="card-body">
                    <p>Configuración de cuenta y perfil</p>
                    <a href="{% url 'core:dashboard' %}" class="button-primary">Ver Perfil</a>
                </div>
            </div>

            {% if user.is_staff %}
            <div class="card">
                <div class="card-header">
                    <h4><i class="fa fa-cog"></i> Administración</h4>
                </div>
                <div class="card-body">
                    <p>Panel de administración del sistema</p>
                    <a href="/admin/" class="button-primary">Admin Panel</a>
                </div>
            </div>
            {% endif %}
        </article>

        <!-- Información del Sistema -->
        <article class="animate-slide-in-bottom animate-delay-500">
            <h3>Información del Sistema</h3>
            <table>
                <tr>
                    <th>Entorno</th>
                    <td>{{ environment }}</td>
                </tr>
                <tr>
                    <th>Django</th>
                    <td>{{ django_version }}</td>
                </tr>
                <tr>
                    <th>Python</th>
                    <td>{{ python_version }}</td>
                </tr>
                <tr>
                    <th>Almacenamiento</th>
                    <td>{{ storage_backend }}</td>
                </tr>
                <tr>
                    <th>Servidor</th>
                    <td>{{ server_info }}</td>
                </tr>
                <tr>
                    <th>Región AWS</th>
                    <td>{{ aws_region }}</td>
                </tr>
                <tr>
                    <th>CDN</th>
                    <td>
                        {% if cdn_enabled %}
                            <span class="tag tag-sector">Habilitado</span>
                        {% else %}
                            <span class="tag">Deshabilitado</span>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>HTMX</th>
                    <td>
                        {% if htmx_enabled %}
                            <span class="tag tag-sector">Activo</span>
                        {% else %}
                            <span class="tag">Inactivo</span>
                        {% endif %}
                    </td>
                </tr>
            </table>
        </article>
    </section>

{% else %}
    <!-- Landing para usuarios no logueados -->
    <section class="animate-fade-in">
        <h1 class="text-gradient">Welp App</h1>
        <p>Plataforma integral de soporte y pagos</p>
        
        <div class="card">
            <div class="card-body">
                <a href="{% url 'core:login' %}" class="button-primary">Iniciar Sesión</a>
            </div>
        </div>
        
        <article class="animate-slide-in-bottom animate-delay-300">
            <div class="card">
                <div class="card-header">
                    <h3><i class="fa fa-headset"></i> WelpDesk</h3>
                </div>
                <div class="card-body">
                    <p>Sistema completo de soporte al cliente y gestión de tickets</p>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3><i class="fa fa-user-check"></i> WelpPay</h3>
                </div>
                <div class="card-body">
                    <p>Solución de pagos y facturación automatizada</p>
                </div>
            </div>
        </article>
    </section>
{% endif %}
{% endblock %} 