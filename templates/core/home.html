{% extends "core/base.html" %}

{% block title %}{% if user.is_authenticated %}Dashboard{% else %}Bienvenido{% endif %} - Welp App{% endblock %}

{% block content %}
{% if user.is_authenticated %}
    <section class="animate-fade-in">
        <h1 class="font-title">Dashboard</h1>
        <p class="font-content">Bienvenido, {{ user.get_full_name|default:user.username }}</p>

        <div class="card mb-6">
            <div class="card-header">
                <h3>Tema Slate Activo</h3>
                <p>Página Core usando el tema por defecto</p>
            </div>
            <div class="card-body">
                <p>Esta es la página principal de <strong>Core</strong>, usando el tema Slate (gris/ámbar) por defecto.</p>
            </div>
        </div>

        <article class="animate-slide-in-bottom animate-delay-200">
            <h3 class="font-title">Aplicaciones</h3>
            
            {% if user.is_staff %}
            <div class="card">
                <div class="card-header">
                    <h4 class="font-ui"><i class="fa fa-code"></i> Desarrollo</h4>
                </div>
                <div class="card-body">
                    <p class="font-content">Herramientas de desarrollo y testing del sistema de temas</p>
                    <a href="{% url 'core:dev' %}" class="button-primary font-ui">Acceder al Demo</a>
                </div>
            </div>
            {% endif %}

            <div class="card">
                <div class="card-header">
                    <h4 class="font-ui"><i class="fa fa-headset"></i> WelpDesk</h4>
                    <span class="ml-2 px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded-full">Tema Sky</span>
                </div>
                <div class="card-body">
                    <p class="font-content">Sistema de soporte y tickets - Se activará automáticamente el tema azul</p>
                    <a href="{% url 'welp_desk:index' %}" class="button-primary font-ui">Acceder</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h4 class="font-ui"><i class="fa fa-user-check"></i> WelpPay</h4>
                    <span class="ml-2 px-2 py-1 text-xs bg-green-100 text-green-700 rounded-full">Tema Forest</span>
                </div>
                <div class="card-body">
                    <p class="font-content">Sistema de pagos y facturación - Se activará automáticamente el tema verde</p>
                    <a href="{% url 'welp_pay:index' %}" class="button-primary font-ui">Acceder</a>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <h4 class="font-ui"><i class="fa fa-user"></i> Mi Perfil</h4>
                </div>
                <div class="card-body">
                    <p class="font-content">Configuración de cuenta y perfil</p>
                    <a href="{% url 'core:dashboard' %}" class="button-primary font-ui">Ver Perfil</a>
                </div>
            </div>

            {% if user.is_staff %}
            <div class="card">
                <div class="card-header">
                    <h4 class="font-ui"><i class="fa fa-cog"></i> Administración</h4>
                </div>
                <div class="card-body">
                    <p class="font-content">Panel de administración del sistema</p>
                    <a href="/admin/" class="button-primary font-ui">Admin Panel</a>
                </div>
            </div>
            {% endif %}
        </article>

        <article class="animate-slide-in-bottom animate-delay-500">
            <h3 class="font-title">Información del Sistema</h3>
            <table>
                <tr>
                    <th>Entorno</th>
                    <td>{{ environment }}</td>
                </tr>
                <tr>
                    <th>Django</th>
                    <td>{{ django_version }}</td>
                </tr>
                <tr>
                    <th>Python</th>
                    <td>{{ python_version }}</td>
                </tr>
                <tr>
                    <th>Almacenamiento</th>
                    <td>{{ storage_backend }}</td>
                </tr>
                <tr>
                    <th>Servidor</th>
                    <td>{{ server_info }}</td>
                </tr>
                <tr>
                    <th>Región AWS</th>
                    <td>{{ aws_region }}</td>
                </tr>
                <tr>
                    <th>CDN</th>
                    <td>
                        {% if cdn_enabled %}
                            <span class="tag tag-sector">Habilitado</span>
                        {% else %}
                            <span class="tag">Deshabilitado</span>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>HTMX</th>
                    <td>
                        {% if htmx_enabled %}
                            <span class="tag tag-sector">Activo</span>
                        {% else %}
                            <span class="tag">Inactivo</span>
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <th>Sistema de Temas</th>
                    <td>
                        <span class="tag tag-sector">Activo</span>
                        <small>(Cambio automático por app)</small>
                    </td>
                </tr>
            </table>
        </article>
    </section>

{% else %}
    <section class="animate-fade-in">
        <h1 class="font-brand text-gradient text-5xl font-bold">Welp App</h1>
        <p class="font-content">Plataforma integral de soporte y pagos</p>
        
        <div class="card">
            <div class="card-body">
                <a href="{% url 'core:login' %}" class="button-primary">Iniciar Sesión</a>
            </div>
        </div>
        
        <article class="animate-slide-in-bottom animate-delay-300">
            <div class="card">
                <div class="card-header">
                    <h3 class="font-ui"><i class="fa fa-headset"></i> WelpDesk</h3>
                </div>
                <div class="card-body">
                    <p class="font-content">Sistema completo de soporte al cliente y gestión de tickets</p>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="font-ui"><i class="fa fa-user-check"></i> WelpPay</h3>
                </div>
                <div class="card-body">
                    <p class="font-content">Solución de pagos y facturación automatizada</p>
                </div>
            </div>
        </article>
    </section>
{% endif %}
{% endblock %} 