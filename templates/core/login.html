{% extends "core/base.html" %}

{% block title %}Iniciar Sesión - Welp App{% endblock %}

{% block content %}
<section class="animate-fade-in">
    <div class="card">
        <div class="card-header">
            <h2>Bienvenido de vuelta</h2>
            <p>Ingresa tus credenciales para acceder</p>
        </div>

        <!-- Mostrar mensajes de error/éxito -->
        {% if messages %}
            {% for message in messages %}
                <div class="{% if message.tags == 'error' %}alert-error{% elif message.tags == 'success' %}alert-success{% else %}alert-info{% endif %}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        
        <div class="card-body">
            <!-- Formulario -->
            <form method="post">
                {% csrf_token %}
                
                <!-- Campo Usuario -->
                <div class="form-group">
                    <label for="username" class="form-label">Usuario</label>
                    <input 
                        id="username" 
                        name="username" 
                        type="text" 
                        required 
                        class="form-input"
                        placeholder="Ingresa tu usuario"
                        value="{{ request.POST.username|default:'' }}"
                    >
                </div>

                <!-- Campo Contraseña -->
                <div class="form-group">
                    <label for="password" class="form-label">Contraseña</label>
                    <input 
                        id="password" 
                        name="password" 
                        type="password" 
                        required 
                        class="form-input"
                        placeholder="Ingresa tu contraseña"
                    >
                </div>

                <!-- Botón de envío -->
                <div class="form-group">
                    <button type="submit" class="button-primary">
                        <i class="fa fa-sign-in-alt"></i>
                        Iniciar Sesión
                    </button>
                </div>

                <!-- Botón Admin -->
                <div class="form-group">
                    <a href="/admin/" class="button-secondary">
                        <i class="fa fa-cog"></i>
                        Ingresar como Administrador
                    </a>
                </div>
            </form>
        </div>

        <div class="card-footer">
            <a href="{% url 'core:home' %}" class="button-minimal">
                <i class="fa fa-arrow-left"></i>
                Volver al inicio
            </a>
        </div>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const usernameField = document.getElementById('username');
    if (usernameField && !usernameField.value) {
        usernameField.focus();
    }
    
    const form = document.querySelector('form');
    const submitBtn = form.querySelector('button[type="submit"]');
    
    form.addEventListener('submit', function() {
        submitBtn.disabled = true;
        submitBtn.textContent = 'Iniciando sesión...';
        submitBtn.className = 'button-disabled';
    });
});
</script>
{% endblock %} 